(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const st={addListToListsContainer(e){const t=document.getElementById("lists-container"),n=document.querySelector("#list-template").content.cloneNode(!0);let r=n.querySelector('[slot="list-id"]');Object.assign(r.dataset,e);let a=n.querySelector("#list-title");a.textContent=e.title,n.querySelector(".updateList").addEventListener("click",()=>{const d=document.getElementById("update-list-modal");d.classList.add("is-active"),d.querySelector('input[name="id"]').value=e.id,d.querySelector('input[name="title"]').value=e.title}),n.querySelector(".deleteList").addEventListener("click",()=>{const d=document.getElementById("delete-list-modal");d.classList.add("is-active"),d.querySelector('input[name="id"]').value=e.id}),n.querySelector(".addCard").addEventListener("click",()=>{const d=document.getElementById("add-card-modal");d.classList.add("is-active"),d.querySelector('input[name="list_id"]').value=e.id}),t.append(n)},activeModal(){document.getElementById("add-list-modal").classList.add("is-active")},closeActiveModal(e){e.currentTarget.closest(".modal").classList.remove("is-active")},async handleSubmitListForm(e){e.preventDefault();const t=e.currentTarget,o=new FormData(t),n=Object.fromEntries(o),r=document.querySelectorAll('[slot= "list-id"]');n.position=r.length;try{await Yt.fetchCreateList(n)}catch(a){console.error(a),alert("Une erreur est survenue lors de la creation de la liste")}},async handleUpdateSubmitListForm(e){e.preventDefault();const t=e.currentTarget,o=new FormData(t),n=Object.fromEntries(o);try{const r=await Yt.fetchUpdateList(n),a=document.querySelector(`[slot="list-id"][data-id="${r.id}"]`),i=a.querySelector("#list-title");i.textContent=r.title,Object.assign(a.dataset,r)}catch(r){console.error(r),alert("Une erreur est survenue lors de la modification de la liste")}},async handleDeleteSubmitListForm(e){e.preventDefault();const t=e.currentTarget,o=new FormData(t),n=Object.fromEntries(o);try{await Yt.fetchDeleteList(n),document.querySelector(`[data-id="${n.id}"]`).remove()}catch(r){console.error(r),alert("Une erreur est survenue lors de la suppression de la liste")}}},Nt="http://localhost:3000/api",Yt={async getLists(){const e=await fetch(`${Nt}/v1/lists`);if(!e.ok)throw new Error(`${e.status} - ${e.statusText}`);return await e.json()},async fetchCreateList(e){const t=await fetch(`${Nt}/v1/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);const o=await t.json();return document.getElementById("add-list-modal").classList.remove("is-active"),st.addListToListsContainer(o)},async fetchUpdateList(e){const t=await fetch(`${Nt}/v1/lists/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title})});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);const o=await t.json();return document.getElementById("update-list-modal").classList.remove("is-active"),o},async fetchDeleteList(e){const t=await fetch(`${Nt}/v1/lists/${e.id}`,{method:"DELETE"});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);document.getElementById("delete-list-modal").classList.remove("is-active")}},ne="http://localhost:3000/api",re={async fetchCreateCard(e){const t=await fetch(`${ne}/v1/cards`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e.content,list_id:Number(e.list_id),color:e.color})});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);const o=await t.json();return document.getElementById("add-card-modal").classList.remove("is-active"),St.addCardToList(o.list_id,o)},async fetchUpdateCard(e){const t=await fetch(`${ne}/v1/cards/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e.content,color:e.color})});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);const o=await t.json();return document.getElementById("update-card-modal").classList.remove("is-active"),o},async fetchDeleteCard(e){const t=await fetch(`${ne}/v1/cards/${e.id}`,{method:"DELETE"});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);document.getElementById("delete-card-modal").classList.remove("is-active")}},Ft=(e,t=0,o=1)=>e>o?o:e<t?t:e,O=(e,t=0,o=Math.pow(10,t))=>Math.round(o*e)/o,co=e=>po(ge(e)),ge=e=>(e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?O(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?O(parseInt(e.substring(6,8),16)/255,2):1}),uo=e=>ho(mo(e)),fo=({h:e,s:t,v:o,a:n})=>{const r=(200-t)*o/100;return{h:O(e),s:O(r>0&&r<200?t*o/100/(r<=100?r:200-r)*100:0),l:O(r/2),a:O(n,2)}},ve=e=>{const{h:t,s:o,l:n}=fo(e);return`hsl(${t}, ${o}%, ${n}%)`},mo=({h:e,s:t,v:o,a:n})=>{e=e/360*6,t=t/100,o=o/100;const r=Math.floor(e),a=o*(1-t),i=o*(1-(e-r)*t),l=o*(1-(1-e+r)*t),s=r%6;return{r:O([o,i,a,a,l,o][s]*255),g:O([l,o,o,i,a,a][s]*255),b:O([a,a,l,o,o,i][s]*255),a:O(n,2)}},kt=e=>{const t=e.toString(16);return t.length<2?"0"+t:t},ho=({r:e,g:t,b:o,a:n})=>{const r=n<1?kt(O(n*255)):"";return"#"+kt(e)+kt(t)+kt(o)+r},po=({r:e,g:t,b:o,a:n})=>{const r=Math.max(e,t,o),a=r-Math.min(e,t,o),i=a?r===e?(t-o)/a:r===t?2+(o-e)/a:4+(e-t)/a:0;return{h:O(60*(i<0?i+6:i)),s:O(r?a/r*100:0),v:O(r/255*100),a:n}},Ye=(e,t)=>{if(e===t)return!0;for(const o in e)if(e[o]!==t[o])return!1;return!0},go=(e,t)=>e.toLowerCase()===t.toLowerCase()?!0:Ye(ge(e),ge(t)),Oe={},Ue=e=>{let t=Oe[e];return t||(t=document.createElement("template"),t.innerHTML=e,Oe[e]=t),t},Ce=(e,t,o)=>{e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:o}))};let ht=!1;const be=e=>"touches"in e,vo=e=>ht&&!be(e)?!1:(ht||(ht=be(e)),!0),Ie=(e,t)=>{const o=be(t)?t.touches[0]:t,n=e.el.getBoundingClientRect();Ce(e.el,"move",e.getMove({x:Ft((o.pageX-(n.left+window.pageXOffset))/n.width),y:Ft((o.pageY-(n.top+window.pageYOffset))/n.height)}))},bo=(e,t)=>{const o=t.keyCode;o>40||e.xy&&o<37||o<33||(t.preventDefault(),Ce(e.el,"move",e.getMove({x:o===39?.01:o===37?-.01:o===34?.05:o===33?-.05:o===35?1:o===36?-1:0,y:o===40?.01:o===38?-.01:0},!0)))};class ze{constructor(t,o,n,r){const a=Ue(`<div role="slider" tabindex="0" part="${o}" ${n}><div part="${o}-pointer"></div></div>`);t.appendChild(a.content.cloneNode(!0));const i=t.querySelector(`[part=${o}]`);i.addEventListener("mousedown",this),i.addEventListener("touchstart",this),i.addEventListener("keydown",this),this.el=i,this.xy=r,this.nodes=[i.firstChild,i]}set dragging(t){const o=t?document.addEventListener:document.removeEventListener;o(ht?"touchmove":"mousemove",this),o(ht?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!vo(t)||!ht&&t.button!=0)return;this.el.focus(),Ie(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),Ie(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":bo(this,t);break}}style(t){t.forEach((o,n)=>{for(const r in o)this.nodes[n].style.setProperty(r,o[r])})}}class Eo extends ze{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:ve({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${O(t)}`)}getMove(t,o){return{h:o?Ft(this.h+t.x*360,0,360):360*t.x}}}class yo extends ze{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:ve(t)},{"background-color":ve({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${O(t.s)}%, Brightness ${O(t.v)}%`)}getMove(t,o){return{s:o?Ft(this.hsva.s+t.x*100,0,100):t.x*100,v:o?Ft(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const wo=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',So="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Co="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Bt=Symbol("same"),ae=Symbol("color"),xe=Symbol("hsva"),ie=Symbol("update"),Ae=Symbol("parts"),Fe=Symbol("css"),Pe=Symbol("sliders");class To extends HTMLElement{static get observedAttributes(){return["color"]}get[Fe](){return[wo,So,Co]}get[Pe](){return[yo,Eo]}get color(){return this[ae]}set color(t){if(!this[Bt](t)){const o=this.colorModel.toHsva(t);this[ie](o),this[ae]=t}}constructor(){super();const t=Ue(`<style>${this[Fe].join("")}</style>`),o=this.attachShadow({mode:"open"});o.appendChild(t.content.cloneNode(!0)),o.addEventListener("move",this),this[Ae]=this[Pe].map(n=>new n(o))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,o,n){const r=this.colorModel.fromAttr(n);this[Bt](r)||(this.color=r)}handleEvent(t){const o=this[xe],n={...o,...t.detail};this[ie](n);let r;!Ye(n,o)&&!this[Bt](r=this.colorModel.fromHsva(n))&&(this[ae]=r,Ce(this,"color-changed",{value:r}))}[Bt](t){return this.color&&this.colorModel.equal(t,this.color)}[ie](t){this[xe]=t,this[Ae].forEach(o=>o.update(t))}}const Do={defaultColor:"#000",toHsva:co,fromHsva:({h:e,s:t,v:o})=>uo({h:e,s:t,v:o,a:1}),equal:go,fromAttr:e=>e};class _o extends To{get colorModel(){return Do}}class Lo extends _o{}customElements.define("hex-color-picker",Lo);const _t={addLabelToCard(e,t){const n=document.querySelector(`[slot="card-id"][data-id="${e}"]`).querySelector(".card-body"),r=document.createElement("div");r.classList.add("tags","has-addons"),Object.assign(r.dataset,{id:t.id}),n.appendChild(r);const a=document.createElement("span");a.classList.add("tag","m-1"),a.style.backgroundColor=t.color,a.textContent=t.name,r.appendChild(a);const i=document.createElement("a");i.classList.add("tag","is-delete"),r.appendChild(i),document.querySelectorAll(".tag.is-delete").forEach(s=>{s.addEventListener("click",async()=>{const d=s.closest(".card").dataset.id,u=s.closest(".tags").dataset.id;await Ut.deleteLabelOnCard(d,u),s.closest(".tags").remove()})})},handleSubmitLabelForm(e){e.preventDefault();const t=document.querySelector('input[name="card_id"]').value,o=document.getElementById("label-select");o.addEventListener("change",r=>r.target.value),Ut.addLabelToCard(t,o.value),document.getElementById("add-label-modal").classList.remove("is-active")},handleSubmitCreateLabelForm(e){e.preventDefault();const t=document.querySelector("#color-picker-label");t.addEventListener("color-changed",i=>{i.detail.value});const o=e.currentTarget,n=new FormData(o),r=Object.fromEntries(n);r.color=t.color,Ut.createLabel(r),document.getElementById("add-label-modal").classList.remove("is-active")}},qt="http://localhost:3000/api",Ut={async getAllLabels(){const e=await fetch(`${qt}/v1/labels`);if(!e.ok)throw new Error(`${e.status} - ${e.statusText}`);return await e.json()},async deleteLabelOnCard(e,t){const o=await fetch(`${qt}/v1/cards/${e}/labels/${t}`,{method:"DELETE"});if(!o.ok)throw new Error(`${o.status} - ${o.statusText}`)},async addLabelToCard(e,t){const o=await fetch(`${qt}/v1/cards/${e}/labels/${t}`,{method:"PUT"});if(!o.ok)throw new Error(`${o.status} - ${o.statusText}`);const n=await o.json();return _t.addLabelToCard(e,n)},async createLabel(e){const t=await fetch(`${qt}/v1/labels`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`${t.status} - ${t.statusText}`);const o=await t.json();return _t.addLabelToCard(e.card_id,o)}},St={addCardToList(e,t){const n=document.querySelector("#cardTemplate").content.cloneNode(!0);let r=n.querySelector('[slot="card-id"]');r.style.backgroundColor=t.color,Object.assign(r.dataset,t);let a=n.querySelector("#card-content");a.textContent=t.content,n.querySelector(".updateCard").addEventListener("click",()=>{const u=document.getElementById("update-card-modal");u.classList.add("is-active"),u.querySelector('input[name="id"]').value=t.id,u.querySelector('input[name="content"]').value=t.content}),n.querySelector(".addLabel").addEventListener("click",async()=>{const u=await Ut.getAllLabels(),f=document.getElementById("add-label-modal");f.classList.add("is-active"),f.querySelector('input[name="card_id"]').value=t.id;const g=document.getElementById("label-select");g.textContent="",u.forEach(E=>{const v=document.createElement("option");v.value=E.id,v.textContent=E.name,g.append(v)})}),n.querySelector(".deleteCard").addEventListener("click",()=>{const u=document.getElementById("delete-card-modal");u.classList.add("is-active"),u.querySelector('input[name="id"]').value=t.id});const d=document.querySelector(`[slot="list-id"][data-id="${e}"]`);d&&d.querySelector(".card-container").appendChild(r)},activeModal(){document.getElementById("add-card-modal").classList.add("is-active")},closeActiveModal(e){e.currentTarget.closest(".modal").classList.remove("is-active")},async handleSubmitCardForm(e){e.preventDefault();const t=document.querySelector("#color-picker-card");t.addEventListener("color-changed",a=>{a.detail.value});const o=e.currentTarget,n=new FormData(o),r=Object.fromEntries(n);r.color=t.color;try{await re.fetchCreateCard(r)}catch(a){console.error(a),alert("Une erreur est survenue lors de la creation de la carte")}},async handleUpdateSubmitCardForm(e){e.preventDefault();const t=document.querySelector("hex-color-picker");t.addEventListener("color-changed",a=>{a.detail.value});const o=e.currentTarget,n=new FormData(o),r=Object.fromEntries(n);r.color=t.color;try{const a=await re.fetchUpdateCard(r),i=document.querySelector(`[slot="card-id"][data-id="${a.id}"]`),l=i.querySelector("#card-content");l.textContent=a.content,Object.assign(i.dataset,a)}catch(a){console.error(a),alert("Une erreur est survenue lors de la modification de la carte")}},async handleDeleteSubmitCardForm(e){e.preventDefault();const t=e.currentTarget,o=new FormData(t),n=Object.fromEntries(o);try{await re.fetchDeleteCard(n),document.querySelector(`[data-id="${n.id}"]`).remove()}catch(r){console.error(r),alert("Une erreur est survenue lors de la suppression de la carte")}}};/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Me(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,n)}return o}function z(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Me(Object(o),!0).forEach(function(n){Oo(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Me(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function zt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zt=function(t){return typeof t}:zt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(e)}function Oo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},V.apply(this,arguments)}function Io(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,a;for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}function xo(e,t){if(e==null)return{};var o=Io(e,t),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ao="1.15.2";function J(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var K=J(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Pt=J(/Edge/i),$e=J(/firefox/i),Lt=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),We=J(/iP(ad|od|hone)/i),Ge=J(/chrome/i)&&J(/android/i),Je={capture:!1,passive:!1};function y(e,t,o){e.addEventListener(t,o,!K&&Je)}function b(e,t,o){e.removeEventListener(t,o,!K&&Je)}function Kt(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Fo(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function X(e,t,o,n){if(e){o=o||document;do{if(t!=null&&(t[0]===">"?e.parentNode===o&&Kt(e,t):Kt(e,t))||n&&e===o)return e;if(e===o)break}while(e=Fo(e))}return null}var Ne=/\s+/g;function $(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(Ne," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(Ne," ")}}function h(e,t,o){var n=e&&e.style;if(n){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),t===void 0?o:o[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=o+(typeof o=="string"?"":"px")}}function pt(e,t){var o="";if(typeof e=="string")o=e;else do{var n=h(e,"transform");n&&n!=="none"&&(o=n+" "+o)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(o)}function Ve(e,t,o){if(e){var n=e.getElementsByTagName(t),r=0,a=n.length;if(o)for(;r<a;r++)o(n[r],r);return n}return[]}function U(){var e=document.scrollingElement;return e||document.documentElement}function _(e,t,o,n,r){if(!(!e.getBoundingClientRect&&e!==window)){var a,i,l,s,d,u,f;if(e!==window&&e.parentNode&&e!==U()?(a=e.getBoundingClientRect(),i=a.top,l=a.left,s=a.bottom,d=a.right,u=a.height,f=a.width):(i=0,l=0,s=window.innerHeight,d=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(t||o)&&e!==window&&(r=r||e.parentNode,!K))do if(r&&r.getBoundingClientRect&&(h(r,"transform")!=="none"||o&&h(r,"position")!=="static")){var g=r.getBoundingClientRect();i-=g.top+parseInt(h(r,"border-top-width")),l-=g.left+parseInt(h(r,"border-left-width")),s=i+a.height,d=l+a.width;break}while(r=r.parentNode);if(n&&e!==window){var E=pt(r||e),v=E&&E.a,w=E&&E.d;E&&(i/=w,l/=v,f/=v,u/=w,s=i+u,d=l+f)}return{top:i,left:l,bottom:s,right:d,width:f,height:u}}}function ke(e,t,o){for(var n=ot(e,!0),r=_(e)[t];n;){var a=_(n)[o],i=void 0;if(i=r>=a,!i)return n;if(n===U())break;n=ot(n,!1)}return!1}function gt(e,t,o,n){for(var r=0,a=0,i=e.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==m.ghost&&(n||i[a]!==m.dragged)&&X(i[a],o.draggable,e,!1)){if(r===t)return i[a];r++}a++}return null}function Te(e,t){for(var o=e.lastElementChild;o&&(o===m.ghost||h(o,"display")==="none"||t&&!Kt(o,t));)o=o.previousElementSibling;return o||null}function q(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==m.clone&&(!t||Kt(e,t))&&o++;return o}function Be(e){var t=0,o=0,n=U();if(e)do{var r=pt(e),a=r.a,i=r.d;t+=e.scrollLeft*a,o+=e.scrollTop*i}while(e!==n&&(e=e.parentNode));return[t,o]}function Po(e,t){for(var o in e)if(e.hasOwnProperty(o)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[o][n])return Number(o)}return-1}function ot(e,t){if(!e||!e.getBoundingClientRect)return U();var o=e,n=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=h(o);if(o.clientWidth<o.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return U();if(n||t)return o;n=!0}}while(o=o.parentNode);return U()}function Mo(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function le(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Ot;function Ke(e,t){return function(){if(!Ot){var o=arguments,n=this;o.length===1?e.call(n,o[0]):e.apply(n,o),Ot=setTimeout(function(){Ot=void 0},t)}}}function $o(){clearTimeout(Ot),Ot=void 0}function Ze(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function Qe(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function to(e,t,o){var n={};return Array.from(e.children).forEach(function(r){var a,i,l,s;if(!(!X(r,t.draggable,e,!1)||r.animated||r===o)){var d=_(r);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,d.left),n.top=Math.min((i=n.top)!==null&&i!==void 0?i:1/0,d.top),n.right=Math.max((l=n.right)!==null&&l!==void 0?l:-1/0,d.right),n.bottom=Math.max((s=n.bottom)!==null&&s!==void 0?s:-1/0,d.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var k="Sortable"+new Date().getTime();function No(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(h(r,"display")==="none"||r===m.ghost)){e.push({target:r,rect:_(r)});var a=z({},e[e.length-1].rect);if(r.thisAnimationDuration){var i=pt(r,!0);i&&(a.top-=i.f,a.left-=i.e)}r.fromRect=a}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(Po(e,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var a=!1,i=0;e.forEach(function(l){var s=0,d=l.target,u=d.fromRect,f=_(d),g=d.prevFromRect,E=d.prevToRect,v=l.rect,w=pt(d,!0);w&&(f.top-=w.f,f.left-=w.e),d.toRect=f,d.thisAnimationDuration&&le(g,f)&&!le(u,f)&&(v.top-f.top)/(v.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(s=Bo(v,g,E,r.options)),le(f,u)||(d.prevFromRect=u,d.prevToRect=f,s||(s=r.options.animation),r.animate(d,v,f,s)),s&&(a=!0,i=Math.max(i,s),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},s),d.thisAnimationDuration=s)}),clearTimeout(t),a?t=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),e=[]},animate:function(n,r,a,i){if(i){h(n,"transition",""),h(n,"transform","");var l=pt(this.el),s=l&&l.a,d=l&&l.d,u=(r.left-a.left)/(s||1),f=(r.top-a.top)/(d||1);n.animatingX=!!u,n.animatingY=!!f,h(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=ko(n),h(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),h(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){h(n,"transition",""),h(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function ko(e){return e.offsetWidth}function Bo(e,t,o,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*n.animation}var ct=[],se={initializeByDefault:!0},Mt={mount:function(t){for(var o in se)se.hasOwnProperty(o)&&!(o in t)&&(t[o]=se[o]);ct.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ct.push(t)},pluginEvent:function(t,o,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var a=t+"Global";ct.forEach(function(i){o[i.pluginName]&&(o[i.pluginName][a]&&o[i.pluginName][a](z({sortable:o},n)),o.options[i.pluginName]&&o[i.pluginName][t]&&o[i.pluginName][t](z({sortable:o},n)))})},initializePlugins:function(t,o,n,r){ct.forEach(function(l){var s=l.pluginName;if(!(!t.options[s]&&!l.initializeByDefault)){var d=new l(t,o,t.options);d.sortable=t,d.options=t.options,t[s]=d,V(n,d.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var i=this.modifyOption(t,a,t.options[a]);typeof i<"u"&&(t.options[a]=i)}},getEventProperties:function(t,o){var n={};return ct.forEach(function(r){typeof r.eventProperties=="function"&&V(n,r.eventProperties.call(o[r.pluginName],t))}),n},modifyOption:function(t,o,n){var r;return ct.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[o]=="function"&&(r=a.optionListeners[o].call(t[a.pluginName],n))}),r}};function qo(e){var t=e.sortable,o=e.rootEl,n=e.name,r=e.targetEl,a=e.cloneEl,i=e.toEl,l=e.fromEl,s=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,E=e.putSortable,v=e.extraEventProperties;if(t=t||o&&o[k],!!t){var w,H=t.options,W="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!K&&!Pt?w=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(n,!0,!0)),w.to=i||o,w.from=l||o,w.item=r||o,w.clone=a,w.oldIndex=s,w.newIndex=d,w.oldDraggableIndex=u,w.newDraggableIndex=f,w.originalEvent=g,w.pullMode=E?E.lastPutMode:void 0;var x=z(z({},v),Mt.getEventProperties(n,t));for(var j in x)w[j]=x[j];o&&o.dispatchEvent(w),H[W]&&H[W].call(t,w)}}var Ho=["evt"],F=function(t,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,a=xo(n,Ho);Mt.pluginEvent.bind(m)(t,o,z({dragEl:c,parentEl:T,ghostEl:p,rootEl:S,nextEl:dt,lastDownEl:Wt,cloneEl:C,cloneHidden:et,dragStarted:Ct,putSortable:L,activeSortable:m.active,originalEvent:r,oldIndex:mt,oldDraggableIndex:It,newIndex:N,newDraggableIndex:tt,hideGhostForTarget:ro,unhideGhostForTarget:ao,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(l){A({sortable:o,name:l,originalEvent:r})}},a))};function A(e){qo(z({putSortable:L,cloneEl:C,targetEl:c,rootEl:S,oldIndex:mt,oldDraggableIndex:It,newIndex:N,newDraggableIndex:tt},e))}var c,T,p,S,dt,Wt,C,et,mt,N,It,tt,Ht,L,ft=!1,Zt=!1,Qt=[],it,R,de,ce,qe,He,Ct,ut,xt,At=!1,jt=!1,Gt,I,ue=[],Ee=!1,te=[],oe=typeof document<"u",Rt=We,je=Pt||K?"cssFloat":"float",jo=oe&&!Ge&&!We&&"draggable"in document.createElement("div"),eo=function(){if(oe){if(K)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),oo=function(t,o){var n=h(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=gt(t,0,o),i=gt(t,1,o),l=a&&h(a),s=i&&h(i),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+_(a).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+_(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var f=l.float==="left"?"left":"right";return i&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=r&&n[je]==="none"||i&&n[je]==="none"&&d+u>r)?"vertical":"horizontal"},Ro=function(t,o,n){var r=n?t.left:t.top,a=n?t.right:t.bottom,i=n?t.width:t.height,l=n?o.left:o.top,s=n?o.right:o.bottom,d=n?o.width:o.height;return r===l||a===s||r+i/2===l+d/2},Xo=function(t,o){var n;return Qt.some(function(r){var a=r[k].options.emptyInsertThreshold;if(!(!a||Te(r))){var i=_(r),l=t>=i.left-a&&t<=i.right+a,s=o>=i.top-a&&o<=i.bottom+a;if(l&&s)return n=r}}),n},no=function(t){function o(a,i){return function(l,s,d,u){var f=l.options.group.name&&s.options.group.name&&l.options.group.name===s.options.group.name;if(a==null&&(i||f))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return o(a(l,s,d,u),i)(l,s,d,u);var g=(i?l:s).options.group.name;return a===!0||typeof a=="string"&&a===g||a.join&&a.indexOf(g)>-1}}var n={},r=t.group;(!r||zt(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=o(r.pull,!0),n.checkPut=o(r.put),n.revertClone=r.revertClone,t.group=n},ro=function(){!eo&&p&&h(p,"display","none")},ao=function(){!eo&&p&&h(p,"display","")};oe&&!Ge&&document.addEventListener("click",function(e){if(Zt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Zt=!1,!1},!0);var lt=function(t){if(c){t=t.touches?t.touches[0]:t;var o=Xo(t.clientX,t.clientY);if(o){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=o,n.preventDefault=void 0,n.stopPropagation=void 0,o[k]._onDragOver(n)}}},Yo=function(t){c&&c.parentNode[k]._isOutsideThisEl(t.target)};function m(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=V({},t),e[k]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:m.supportPointer!==!1&&"PointerEvent"in window&&!Lt,emptyInsertThreshold:5};Mt.initializePlugins(this,e,o);for(var n in o)!(n in t)&&(t[n]=o[n]);no(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:jo,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?y(e,"pointerdown",this._onTapStart):(y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Qt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),V(this,No())}m.prototype={constructor:m,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ut=null)},_getDirection:function(t,o){return typeof this.options.direction=="function"?this.options.direction.call(this,t,o,c):this.options.direction},_onTapStart:function(t){if(t.cancelable){var o=this,n=this.el,r=this.options,a=r.preventOnFilter,i=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(l||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=r.filter;if(Zo(n),!c&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||r.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Lt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=X(s,r.draggable,n,!1),!(s&&s.animated)&&Wt!==s)){if(mt=q(s),It=q(s,r.draggable),typeof u=="function"){if(u.call(this,t,s,this)){A({sortable:o,rootEl:d,name:"filter",targetEl:s,toEl:n,fromEl:n}),F("filter",o,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=X(d,f.trim(),n,!1),f)return A({sortable:o,rootEl:f,name:"filter",targetEl:s,fromEl:n,toEl:n}),F("filter",o,{evt:t}),!0}),u)){a&&t.cancelable&&t.preventDefault();return}r.handle&&!X(d,r.handle,n,!1)||this._prepareDragStart(t,l,s)}}},_prepareDragStart:function(t,o,n){var r=this,a=r.el,i=r.options,l=a.ownerDocument,s;if(n&&!c&&n.parentNode===a){var d=_(n);if(S=a,c=n,T=c.parentNode,dt=c.nextSibling,Wt=n,Ht=i.group,m.dragged=c,it={target:c,clientX:(o||t).clientX,clientY:(o||t).clientY},qe=it.clientX-d.left,He=it.clientY-d.top,this._lastX=(o||t).clientX,this._lastY=(o||t).clientY,c.style["will-change"]="all",s=function(){if(F("delayEnded",r,{evt:t}),m.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!$e&&r.nativeDraggable&&(c.draggable=!0),r._triggerDragStart(t,o),A({sortable:r,name:"choose",originalEvent:t}),$(c,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){Ve(c,u.trim(),fe)}),y(l,"dragover",lt),y(l,"mousemove",lt),y(l,"touchmove",lt),y(l,"mouseup",r._onDrop),y(l,"touchend",r._onDrop),y(l,"touchcancel",r._onDrop),$e&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),F("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Pt||K))){if(m.eventCanceled){this._onDrop();return}y(l,"mouseup",r._disableDelayedDrag),y(l,"touchend",r._disableDelayedDrag),y(l,"touchcancel",r._disableDelayedDrag),y(l,"mousemove",r._delayedDragTouchMoveHandler),y(l,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&y(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(s,i.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var o=t.touches?t.touches[0]:t;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&fe(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,o){o=o||t.pointerType=="touch"&&t,!this.nativeDraggable||o?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):o?y(document,"touchmove",this._onTouchMove):y(document,"mousemove",this._onTouchMove):(y(c,"dragend",this),y(S,"dragstart",this._onDragStart));try{document.selection?Jt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,o){if(ft=!1,S&&c){F("dragStarted",this,{evt:o}),this.nativeDraggable&&y(document,"dragover",Yo);var n=this.options;!t&&$(c,n.dragClass,!1),$(c,n.ghostClass,!0),m.active=this,t&&this._appendGhost(),A({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(R){this._lastX=R.clientX,this._lastY=R.clientY,ro();for(var t=document.elementFromPoint(R.clientX,R.clientY),o=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(R.clientX,R.clientY),t!==o);)o=t;if(c.parentNode[k]._isOutsideThisEl(t),o)do{if(o[k]){var n=void 0;if(n=o[k]._onDragOver({clientX:R.clientX,clientY:R.clientY,target:t,rootEl:o}),n&&!this.options.dragoverBubble)break}t=o}while(o=o.parentNode);ao()}},_onTouchMove:function(t){if(it){var o=this.options,n=o.fallbackTolerance,r=o.fallbackOffset,a=t.touches?t.touches[0]:t,i=p&&pt(p,!0),l=p&&i&&i.a,s=p&&i&&i.d,d=Rt&&I&&Be(I),u=(a.clientX-it.clientX+r.x)/(l||1)+(d?d[0]-ue[0]:0)/(l||1),f=(a.clientY-it.clientY+r.y)/(s||1)+(d?d[1]-ue[1]:0)/(s||1);if(!m.active&&!ft){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(p){i?(i.e+=u-(de||0),i.f+=f-(ce||0)):i={a:1,b:0,c:0,d:1,e:u,f};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");h(p,"webkitTransform",g),h(p,"mozTransform",g),h(p,"msTransform",g),h(p,"transform",g),de=u,ce=f,R=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!p){var t=this.options.fallbackOnBody?document.body:S,o=_(c,!0,Rt,!0,t),n=this.options;if(Rt){for(I=t;h(I,"position")==="static"&&h(I,"transform")==="none"&&I!==document;)I=I.parentNode;I!==document.body&&I!==document.documentElement?(I===document&&(I=U()),o.top+=I.scrollTop,o.left+=I.scrollLeft):I=U(),ue=Be(I)}p=c.cloneNode(!0),$(p,n.ghostClass,!1),$(p,n.fallbackClass,!0),$(p,n.dragClass,!0),h(p,"transition",""),h(p,"transform",""),h(p,"box-sizing","border-box"),h(p,"margin",0),h(p,"top",o.top),h(p,"left",o.left),h(p,"width",o.width),h(p,"height",o.height),h(p,"opacity","0.8"),h(p,"position",Rt?"absolute":"fixed"),h(p,"zIndex","100000"),h(p,"pointerEvents","none"),m.ghost=p,t.appendChild(p),h(p,"transform-origin",qe/parseInt(p.style.width)*100+"% "+He/parseInt(p.style.height)*100+"%")}},_onDragStart:function(t,o){var n=this,r=t.dataTransfer,a=n.options;if(F("dragStart",this,{evt:t}),m.eventCanceled){this._onDrop();return}F("setupClone",this),m.eventCanceled||(C=Qe(c),C.removeAttribute("id"),C.draggable=!1,C.style["will-change"]="",this._hideClone(),$(C,this.options.chosenClass,!1),m.clone=C),n.cloneId=Jt(function(){F("clone",n),!m.eventCanceled&&(n.options.removeCloneOnHide||S.insertBefore(C,c),n._hideClone(),A({sortable:n,name:"clone"}))}),!o&&$(c,a.dragClass,!0),o?(Zt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(n,r,c)),y(document,"drop",n),h(c,"transform","translateZ(0)")),ft=!0,n._dragStartId=Jt(n._dragStarted.bind(n,o,t)),y(document,"selectstart",n),Ct=!0,Lt&&h(document.body,"user-select","none")},_onDragOver:function(t){var o=this.el,n=t.target,r,a,i,l=this.options,s=l.group,d=m.active,u=Ht===s,f=l.sort,g=L||d,E,v=this,w=!1;if(Ee)return;function H(wt,lo){F(wt,v,z({evt:t,isOwner:u,axis:E?"vertical":"horizontal",revert:i,dragRect:r,targetRect:a,canSort:f,fromSortable:g,target:n,completed:x,onMove:function(Le,so){return Xt(S,o,c,r,Le,_(Le),t,so)},changed:j},lo))}function W(){H("dragOverAnimationCapture"),v.captureAnimationState(),v!==g&&g.captureAnimationState()}function x(wt){return H("dragOverCompleted",{insertion:wt}),wt&&(u?d._hideClone():d._showClone(v),v!==g&&($(c,L?L.options.ghostClass:d.options.ghostClass,!1),$(c,l.ghostClass,!0)),L!==v&&v!==m.active?L=v:v===m.active&&L&&(L=null),g===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){H("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(n===c&&!c.animated||n===o&&!n.animated)&&(ut=null),!l.dragoverBubble&&!t.rootEl&&n!==document&&(c.parentNode[k]._isOutsideThisEl(t.target),!wt&&lt(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function j(){N=q(c),tt=q(c,l.draggable),A({sortable:v,name:"change",toEl:o,newIndex:N,newDraggableIndex:tt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=X(n,l.draggable,o,!0),H("dragOver"),m.eventCanceled)return w;if(c.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return x(!1);if(Zt=!1,d&&!l.disabled&&(u?f||(i=T!==S):L===this||(this.lastPutMode=Ht.checkPull(this,d,c,t))&&s.checkPut(this,d,c,t))){if(E=this._getDirection(t,n)==="vertical",r=_(c),H("dragOverValid"),m.eventCanceled)return w;if(i)return T=S,W(),this._hideClone(),H("revert"),m.eventCanceled||(dt?S.insertBefore(c,dt):S.appendChild(c)),x(!0);var P=Te(o,l.draggable);if(!P||Go(t,E,this)&&!P.animated){if(P===c)return x(!1);if(P&&o===t.target&&(n=P),n&&(a=_(n)),Xt(S,o,c,r,n,a,t,!!n)!==!1)return W(),P&&P.nextSibling?o.insertBefore(c,P.nextSibling):o.appendChild(c),T=o,j(),x(!0)}else if(P&&Wo(t,E,this)){var nt=gt(o,0,l,!0);if(nt===c)return x(!1);if(n=nt,a=_(n),Xt(S,o,c,r,n,a,t,!1)!==!1)return W(),o.insertBefore(c,nt),T=o,j(),x(!0)}else if(n.parentNode===o){a=_(n);var Y=0,rt,vt=c.parentNode!==o,M=!Ro(c.animated&&c.toRect||r,n.animated&&n.toRect||a,E),bt=E?"top":"left",Z=ke(n,"top","top")||ke(c,"top","top"),Et=Z?Z.scrollTop:void 0;ut!==n&&(rt=a[bt],At=!1,jt=!M&&l.invertSwap||vt),Y=Jo(t,n,a,E,M?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,jt,ut===n);var G;if(Y!==0){var at=q(c);do at-=Y,G=T.children[at];while(G&&(h(G,"display")==="none"||G===p))}if(Y===0||G===n)return x(!1);ut=n,xt=Y;var yt=n.nextElementSibling,Q=!1;Q=Y===1;var $t=Xt(S,o,c,r,n,a,t,Q);if($t!==!1)return($t===1||$t===-1)&&(Q=$t===1),Ee=!0,setTimeout(zo,30),W(),Q&&!yt?o.appendChild(c):n.parentNode.insertBefore(c,Q?yt:n),Z&&Ze(Z,0,Et-Z.scrollTop),T=c.parentNode,rt!==void 0&&!jt&&(Gt=Math.abs(rt-_(n)[bt])),j(),x(!0)}if(o.contains(c))return x(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",lt),b(document,"mousemove",lt),b(document,"touchmove",lt)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var o=this.el,n=this.options;if(N=q(c),tt=q(c,n.draggable),F("drop",this,{evt:t}),T=c&&c.parentNode,N=q(c),tt=q(c,n.draggable),m.eventCanceled){this._nulling();return}ft=!1,jt=!1,At=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ye(this.cloneId),ye(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Lt&&h(document.body,"user-select",""),h(c,"transform",""),t&&(Ct&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),p&&p.parentNode&&p.parentNode.removeChild(p),(S===T||L&&L.lastPutMode!=="clone")&&C&&C.parentNode&&C.parentNode.removeChild(C),c&&(this.nativeDraggable&&b(c,"dragend",this),fe(c),c.style["will-change"]="",Ct&&!ft&&$(c,L?L.options.ghostClass:this.options.ghostClass,!1),$(c,this.options.chosenClass,!1),A({sortable:this,name:"unchoose",toEl:T,newIndex:null,newDraggableIndex:null,originalEvent:t}),S!==T?(N>=0&&(A({rootEl:T,name:"add",toEl:T,fromEl:S,originalEvent:t}),A({sortable:this,name:"remove",toEl:T,originalEvent:t}),A({rootEl:T,name:"sort",toEl:T,fromEl:S,originalEvent:t}),A({sortable:this,name:"sort",toEl:T,originalEvent:t})),L&&L.save()):N!==mt&&N>=0&&(A({sortable:this,name:"update",toEl:T,originalEvent:t}),A({sortable:this,name:"sort",toEl:T,originalEvent:t})),m.active&&((N==null||N===-1)&&(N=mt,tt=It),A({sortable:this,name:"end",toEl:T,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){F("nulling",this),S=c=T=p=dt=C=Wt=et=it=R=Ct=N=tt=mt=It=ut=xt=L=Ht=m.dragged=m.ghost=m.clone=m.active=null,te.forEach(function(t){t.checked=!0}),te.length=de=ce=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":c&&(this._onDragOver(t),Uo(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],o,n=this.el.children,r=0,a=n.length,i=this.options;r<a;r++)o=n[r],X(o,i.draggable,this.el,!1)&&t.push(o.getAttribute(i.dataIdAttr)||Ko(o));return t},sort:function(t,o){var n={},r=this.el;this.toArray().forEach(function(a,i){var l=r.children[i];X(l,this.options.draggable,r,!1)&&(n[a]=l)},this),o&&this.captureAnimationState(),t.forEach(function(a){n[a]&&(r.removeChild(n[a]),r.appendChild(n[a]))}),o&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,o){return X(t,o||this.options.draggable,this.el,!1)},option:function(t,o){var n=this.options;if(o===void 0)return n[t];var r=Mt.modifyOption(this,t,o);typeof r<"u"?n[t]=r:n[t]=o,t==="group"&&no(n)},destroy:function(){F("destroy",this);var t=this.el;t[k]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qt.splice(Qt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!et){if(F("hideClone",this),m.eventCanceled)return;h(C,"display","none"),this.options.removeCloneOnHide&&C.parentNode&&C.parentNode.removeChild(C),et=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(et){if(F("showClone",this),m.eventCanceled)return;c.parentNode==S&&!this.options.group.revertClone?S.insertBefore(C,c):dt?S.insertBefore(C,dt):S.appendChild(C),this.options.group.revertClone&&this.animate(c,C),h(C,"display",""),et=!1}}};function Uo(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Xt(e,t,o,n,r,a,i,l){var s,d=e[k],u=d.options.onMove,f;return window.CustomEvent&&!K&&!Pt?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=t,s.from=e,s.dragged=o,s.draggedRect=n,s.related=r||t,s.relatedRect=a||_(t),s.willInsertAfter=l,s.originalEvent=i,e.dispatchEvent(s),u&&(f=u.call(d,s,i)),f}function fe(e){e.draggable=!1}function zo(){Ee=!1}function Wo(e,t,o){var n=_(gt(o.el,0,o.options,!0)),r=to(o.el,o.options,p),a=10;return t?e.clientX<r.left-a||e.clientY<n.top&&e.clientX<n.right:e.clientY<r.top-a||e.clientY<n.bottom&&e.clientX<n.left}function Go(e,t,o){var n=_(Te(o.el,o.options.draggable)),r=to(o.el,o.options,p),a=10;return t?e.clientX>r.right+a||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>r.bottom+a||e.clientX>n.right&&e.clientY>n.top}function Jo(e,t,o,n,r,a,i,l){var s=n?e.clientY:e.clientX,d=n?o.height:o.width,u=n?o.top:o.left,f=n?o.bottom:o.right,g=!1;if(!i){if(l&&Gt<d*r){if(!At&&(xt===1?s>u+d*a/2:s<f-d*a/2)&&(At=!0),At)g=!0;else if(xt===1?s<u+Gt:s>f-Gt)return-xt}else if(s>u+d*(1-r)/2&&s<f-d*(1-r)/2)return Vo(t)}return g=g||i,g&&(s<u+d*a/2||s>f-d*a/2)?s>u+d/2?1:-1:0}function Vo(e){return q(c)<q(e)?1:-1}function Ko(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;o--;)n+=t.charCodeAt(o);return n.toString(36)}function Zo(e){te.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var n=t[o];n.checked&&te.push(n)}}function Jt(e){return setTimeout(e,0)}function ye(e){return clearTimeout(e)}oe&&y(document,"touchmove",function(e){(m.active||ft)&&e.cancelable&&e.preventDefault()});m.utils={on:y,off:b,css:h,find:Ve,is:function(t,o){return!!X(t,o,t,!1)},extend:Mo,throttle:Ke,closest:X,toggleClass:$,clone:Qe,index:q,nextTick:Jt,cancelNextTick:ye,detectDirection:oo,getChild:gt};m.get=function(e){return e[k]};m.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(m.utils=z(z({},m.utils),n.utils)),Mt.mount(n)})};m.create=function(e,t){return new m(e,t)};m.version=Ao;var D=[],Tt,we,Se=!1,me,he,ee,Dt;function Qo(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(o){var n=o.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):n.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var n=o.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),Re(),Vt(),$o()},nulling:function(){ee=we=Tt=Se=Dt=me=he=null,D.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,n){var r=this,a=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,l=document.elementFromPoint(a,i);if(ee=o,n||this.options.forceAutoScrollFallback||Pt||K||Lt){pe(o,this.options,l,n);var s=ot(l,!0);Se&&(!Dt||a!==me||i!==he)&&(Dt&&Re(),Dt=setInterval(function(){var d=ot(document.elementFromPoint(a,i),!0);d!==s&&(s=d,Vt()),pe(o,r.options,d,n)},10),me=a,he=i)}else{if(!this.options.bubbleScroll||ot(l,!0)===U()){Vt();return}pe(o,this.options,ot(l,!1),!1)}}},V(e,{pluginName:"scroll",initializeByDefault:!0})}function Vt(){D.forEach(function(e){clearInterval(e.pid)}),D=[]}function Re(){clearInterval(Dt)}var pe=Ke(function(e,t,o,n){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,l=t.scrollSpeed,s=U(),d=!1,u;we!==o&&(we=o,Vt(),Tt=t.scroll,u=t.scrollFn,Tt===!0&&(Tt=ot(o,!0)));var f=0,g=Tt;do{var E=g,v=_(E),w=v.top,H=v.bottom,W=v.left,x=v.right,j=v.width,P=v.height,nt=void 0,Y=void 0,rt=E.scrollWidth,vt=E.scrollHeight,M=h(E),bt=E.scrollLeft,Z=E.scrollTop;E===s?(nt=j<rt&&(M.overflowX==="auto"||M.overflowX==="scroll"||M.overflowX==="visible"),Y=P<vt&&(M.overflowY==="auto"||M.overflowY==="scroll"||M.overflowY==="visible")):(nt=j<rt&&(M.overflowX==="auto"||M.overflowX==="scroll"),Y=P<vt&&(M.overflowY==="auto"||M.overflowY==="scroll"));var Et=nt&&(Math.abs(x-r)<=i&&bt+j<rt)-(Math.abs(W-r)<=i&&!!bt),G=Y&&(Math.abs(H-a)<=i&&Z+P<vt)-(Math.abs(w-a)<=i&&!!Z);if(!D[f])for(var at=0;at<=f;at++)D[at]||(D[at]={});(D[f].vx!=Et||D[f].vy!=G||D[f].el!==E)&&(D[f].el=E,D[f].vx=Et,D[f].vy=G,clearInterval(D[f].pid),(Et!=0||G!=0)&&(d=!0,D[f].pid=setInterval((function(){n&&this.layer===0&&m.active._onTouchMove(ee);var yt=D[this.layer].vy?D[this.layer].vy*l:0,Q=D[this.layer].vx?D[this.layer].vx*l:0;typeof u=="function"&&u.call(m.dragged.parentNode[k],Q,yt,e,ee,D[this.layer].el)!=="continue"||Ze(D[this.layer].el,Q,yt)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&g!==s&&(g=ot(g,!1)));Se=d}},30),io=function(t){var o=t.originalEvent,n=t.putSortable,r=t.dragEl,a=t.activeSortable,i=t.dispatchSortableEvent,l=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(o){var d=n||a;l();var u=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,f=document.elementFromPoint(u.clientX,u.clientY);s(),d&&!d.el.contains(f)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function De(){}De.prototype={startIndex:null,dragStart:function(t){var o=t.oldDraggableIndex;this.startIndex=o},onSpill:function(t){var o=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=gt(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(o,r):this.sortable.el.appendChild(o),this.sortable.animateAll(),n&&n.animateAll()},drop:io};V(De,{pluginName:"revertOnSpill"});function _e(){}_e.prototype={onSpill:function(t){var o=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),r.animateAll()},drop:io};V(_e,{pluginName:"removeOnSpill"});m.mount(new Qo);m.mount(_e,De);const Xe="http://localhost:3000/api",B={init(){B.fetchAndDisplayLists(),B.listenToClickOnAddListModal(),B.listenToClickOnModalClosingElements(),B.listenToSubmitOnAddListForm(),B.listenToSubmitOnUpdateListForm(),B.listenToSubmitOnDeleteListForm(),B.listenToSubmitOnAddCardForm(),B.listenToSubmitOnUpdateCardForm(),B.listenToSubmitOnDeleteCardForm(),B.listenToClickOnAddLabelForm(),B.listenToSubmitOnCreateLabelForm()},async fetchAndDisplayLists(){try{const e=await Yt.getLists(),t=document.getElementById("lists-container");t.textContent="",e.forEach(o=>{st.addListToListsContainer(o),o.cards.forEach(n=>{St.addCardToList(o.id,n),n.labels.forEach(r=>{_t.addLabelToCard(n.id,r)})}),this.initializeCardSortable(o.id)}),this.initializeListSortable()}catch(e){console.error(e),alert("Une erreur est survenue lors de la rcupration des listes")}},listenToClickOnAddListModal(){document.getElementById("addList").addEventListener("click",st.activeModal)},listenToClickOnModalClosingElements(){document.querySelectorAll(".modal .close").forEach(t=>{t.addEventListener("click",st.closeActiveModal)})},listenToSubmitOnAddListForm(){document.getElementById("addListForm").addEventListener("submit",st.handleSubmitListForm)},listenToSubmitOnUpdateListForm(){document.getElementById("updateListForm").addEventListener("submit",st.handleUpdateSubmitListForm)},listenToSubmitOnDeleteListForm(){document.getElementById("deleteListForm").addEventListener("submit",st.handleDeleteSubmitListForm)},listenToSubmitOnAddCardForm(){document.getElementById("addCardForm").addEventListener("submit",St.handleSubmitCardForm)},listenToSubmitOnUpdateCardForm(){document.getElementById("updateCardForm").addEventListener("submit",St.handleUpdateSubmitCardForm)},listenToSubmitOnDeleteCardForm(){document.getElementById("deleteCardForm").addEventListener("submit",St.handleDeleteSubmitCardForm)},initializeListSortable(){const e=document.getElementById("lists-container");new m(e,{animation:150,ghostClass:"blue-background-class",handle:".message-header",onEnd:async()=>{document.querySelectorAll("#lists-container section").forEach(async(o,n)=>{const r=n,a=o.dataset.id,i=await fetch(`${Xe}/v1/lists/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:r})});if(!i.ok)throw new Error(`${i.status} - ${i.statusText}`)})}})},initializeCardSortable(e){const t=document.querySelector(`[slot="list-id"][data-id="${e}"] .message-body`);new m(t,{group:"shared",animation:150,onEnd:async o=>{document.querySelectorAll("#lists-container section article").forEach(async r=>{const a=o.item.dataset.id,i=Number(o.to.closest('[slot="list-id"]').dataset.id),l=Number(Array.from(o.to.children).indexOf(o.item)),s=await fetch(`${Xe}/v1/cards/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:i,position:l})});if(!s.ok)throw new Error(`${s.status} - ${s.statusText}`)})}})},listenToClickOnAddLabelForm(){document.getElementById("add-label-form").addEventListener("submit",_t.handleSubmitLabelForm)},listenToSubmitOnCreateLabelForm(){document.getElementById("create-label-form").addEventListener("submit",_t.handleSubmitCreateLabelForm)}};B.init();
